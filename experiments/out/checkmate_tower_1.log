================================================================================
SLTP v.0.2.0
================================================================================
================================================================================
(pid: 36836) STARTING STEP #1: Train: Explore the state space of the training instances
================================================================================
------------------------------------------------
 DOMAIN PARAMETERS: 
------------------------------------------------
------------------------------------------------
domain_name: checkmate_tactic
use_player_as_feature: True
use_player_to_encode: True
use_next_player_as_feature: False
use_next_player_to_encode: False
use_margin_as_feature: False
use_verbose_margin_as_feature: False
objects_to_ignore: set()
map_cells: True
use_diagonals_for_map_cells: True
use_adjacency: {'col', 'row', 'cell'}
use_distance_2: {'col', 'row', 'cell'}
use_distance_more_than_1: {'col', 'row', 'cell'}
use_bidirectional: {}
sorts_to_use: {'col', 'row', 'cell'}
n_moves: 10000
unary_predicates: {'queen_attaked_without_protection', 'check', 'checkmate', 'black_king_closed_in_edge_by_white_queen', 'stalemate'}
game_version: 0
------------------------------------------------
------------------------------------------------
(START Episode 0)
------------------------------------------------
------------------------------------------------
(0) Exploration of the training sample:
------------------------------------------------
2021-06-21 11:06:54 INFO     Expanding train instance: checkmate_tactic - 0
#k..#
#..Q#
#K..#

------------------------------------------------
(0) Generation of the training sample:
------------------------------------------------
2021-06-21 11:06:54 INFO     sample: #states=24, #transition-entries=24, #transitions=24
2021-06-21 11:06:54 INFO     Entire sample: roots: 1, states: 24, transitions: 24 (11 optimal), goals: 5, alive: 7, deadends: 12
2021-06-21 11:06:54 INFO     Printing SAT transition matrix with 24 states, -13 states with some outgoing transition, 18 operators, 24 (non-det) transitions, and 21 (adv) transitions,
------------------------------------------------
(0) Generate the pool of candidate features:
------------------------------------------------
2021-06-21 11:06:54 INFO     Starting generation of feature pool. State sample used to detect redundancies: roots: 1, states: 24, transitions: 24 (11 optimal), goals: 5, alive: 7, deadends: 12
2021-06-21 11:06:54 INFO     Printing sample information to '/home/orbital/ws/research/gpl/code/gpl/workspace/checkmate_tactic_1/sample.io'
2021-06-21 11:06:54 INFO     Skipping automatic feature generation: User provided set of handcrafted features
2021-06-21 11:06:54 INFO     Logged feature denotations at '/home/orbital/ws/research/gpl/code/gpl/workspace/checkmate_tactic_1/feature-denotations.txt'
2021-06-21 11:06:54 INFO     Printing feature matrix with shape (24, 6) to '/home/orbital/ws/research/gpl/code/gpl/workspace/checkmate_tactic_1/feature-matrix.io'
------------------------------------------------
(0) C++ CNF generation module:
------------------------------------------------
2021-06-21 11:06:54 INFO     Calling C++ MaxSAT module
2021-06-21 11:06:54 INFO     Executing "/home/orbital/ws/research/gpl/code/gpl/src/generators/adv/cnfgen --workspace /home/orbital/ws/research/gpl/code/gpl/workspace/checkmate_tactic_1 --validate-features 0,1,2,3,4,5 --v_slack 2 --distinguish-goals --initial-sample-size 20 --refinement-batch-size 50 --seed 0 --verbosity 2 --acyclicity topological --encodings_dir  --sampling_strategy full --optimal_steps 3 --consistency_bound 2 --n_features 2 --closed --maxsat_iter 4 --use_weighted_tx" on directory "/home/orbital/ws/research/gpl/code/gpl/experiments"
Parsing training data... 
reading '/home/orbital/ws/research/gpl/code/gpl/workspace/checkmate_tactic_1/transitions-info.io
TransitionSample::read_dump: #states=24, #transitions=24, #transitions (adv)=21
reading '/home/orbital/ws/research/gpl/code/gpl/workspace/checkmate_tactic_1/feature-matrix.io
FeatureMatrix::read_dump: #states=24, #features=6
Done. Training sample: [states: 24, transitions: 24 (from alive state: 24), unsolvable: 12, goals: 5, unknowns: 0, features: 6, est. size: 0.00 MB.]
Sampling 20 alive states at random


###  STARTING ITERATION 1  ###
Sample [sz=24]: 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0, 

Number of transitions/equivalence classes: 24/24
Number of necessarily bad transitions/classes: 13/13
Generating CNF encoding for 7 alive states, 24 alive-to-solvable and alive-to-dead transitions and 24 transition equivalence classes
A total of 58 variables were created
	Select(f): 6
	Good(s, a, s'): 24
	Bad(s): 0
	V(s, d): 28
A total of 129 clauses were created
	Policy completeness [1]: 0
	Transition separation [5,6]: 0
	V descending along good transitions [X]: 15
	V is total function within bounds [X]: 49
	Goal separation [X]: 35
	(Weighted) Select(f): 6
Writing final DIMACS file...
CNF [58 vars, 129 clauses] generated in 0.00 sec.
Calling: open-wbo_static /home/orbital/ws/research/gpl/code/gpl/workspace/checkmate_tactic_1/theory.wsat > /home/orbital/ws/research/gpl/code/gpl/workspace/checkmate_tactic_1/maxsat_solver_run.log
Call returned with exit code 7680
Solution with cost 0 found in 0.00sec.

Good(0, 2, 3) Good(0, 3, 4) Good(15, 13, 19) Good(14, 12, 4) Good(7, 7, 9) Good(0, 1, 2) Good(14, 13, 3) 
Good(0, 2, 3) Good(0, 3, 4) Good(15, 13, 19) Good(14, 12, 4) Good(7, 7, 9) Good(0, 1, 2) Good(14, 13, 3) 
Num Good(s, a, s') selected: 7 (29.17%)
Num Bad(s) selected: 0 (0.00%)
Num selected features: 6 (100.00%)
Features: 
	0: Atom[stalemate] [k=1]
	1: Atom[checkmate] [k=1]
	2: Atom[queen_attaked_without_protection] [k=1]
	3: Atom[black_king_closed_in_edge_by_white_queen] [k=1]
	4: Num[And(cell-attaked-by-black_king,Not(cell-attaked-by-white_queen))] [k=4]
	5: Dist[cell-has-white_king;adjacent_cell;cell-has-black_king] [k=4]
Solution found in iteration #1 is correct!
DNF transition-classifier saved in /home/orbital/ws/research/gpl/code/gpl/workspace/checkmate_tactic_1/classifier.txt
Total times: Theory generation: 0.00, Solver: 0.00, TOTAL: 0.00
------------------------------------------------
(END Episode 0)
------------------------------------------------
================================================================================
END OF STEP #1: Train: Explore the state space of the training instances. 0.18 CPU sec - 43.99 MB
================================================================================
================================================================================
(pid: 36843) STARTING STEP #2: Testing of the D2L policy
================================================================================

POLICY:
Features (#: 6; total k: 12; max k = 4):
  (0) Atom[stalemate] [k=1]
  (1) Atom[checkmate] [k=1]
  (2) Atom[queen_attaked_without_protection] [k=1]
  (3) Atom[black_king_closed_in_edge_by_white_queen] [k=1]
  (4) Num[And(cell-attaked-by-black_king,Not(cell-attaked-by-white_queen))] [k=4]
  (5) Dist[cell-has-white_king;adjacent_cell;cell-has-black_king] [k=4]
Invariants: 0=0,2=0,5>0,1=0,4>0
Policy:
  1. 0=0 AND 1=0 AND 2=0 AND 3=0 AND 4>0 AND 5>0 -> {0 ·, 1 ↑, 2 ·, 3 ↑, 4 ↓, 5 ·}, {0 ·, 1 ↑, 2 ·, 3 ·, 4 ·, 5 ·}
  2. 0=0 AND 1=0 AND 2=0 AND 3>0 AND 4>0 AND 5>0 -> {0 ·, 1 ↑, 2 ·, 3 ·, 4 ↓, 5 ·}

2021-06-21 11:06:54 INFO     Testing policy in instance: checkmate_tactic - 0
k.. # k.Q # 
..Q # ... # 
K.. # K.. # 
1(pl) 2(pl) 
0(de) 0(de) 
0(go) 1(go) 
0(ch) 1(ch) 
0(st) 0(st) 
0(ch) 1(ch) 
0(qu) 0(qu) 
0(bl) 0(bl) 

2021-06-21 11:06:54 INFO     Goal found after expanding 1 nodes
2021-06-21 11:06:54 INFO     The solution was: ['white_queen_1.2_0.2']
2021-06-21 11:06:54 INFO     Testing policy in instance: checkmate_tactic - -1
..k. # 
.... # 
.... # 
.QK. # 
1(pl)  
0(de)  
0(go)  
0(ch)  
0(st)  
0(ch)  
0(qu)  
0(bl)  

2021-06-21 11:06:54 WARNING  Testing of policy failed with code: ExitCode.AbstractPolicyNotCompleteOnTestInstances
2021-06-21 11:06:54 INFO     Testing policy in instance: checkmate_tactic - -2
.... # 
QK.k # 
.... # 
1(pl)  
0(de)  
0(go)  
0(ch)  
0(st)  
0(ch)  
0(qu)  
0(bl)  

2021-06-21 11:06:54 WARNING  Testing of policy failed with code: ExitCode.AbstractPolicyNotCompleteOnTestInstances
2021-06-21 11:06:54 INFO     Testing policy in instance: checkmate_tactic - -3
K.... # 
..Q.. # 
..... # 
..... # 
....k # 
1(pl)   
0(de)   
0(go)   
0(ch)   
0(st)   
0(ch)   
0(qu)   
0(bl)   

2021-06-21 11:06:54 WARNING  Testing of policy failed with code: ExitCode.AbstractPolicyNotCompleteOnTestInstances
2021-06-21 11:06:54 INFO     Testing policy in instance: checkmate_tactic - -4
K..... # 
...... # 
...... # 
...k.. # 
...... # 
..Q... # 
1(pl)    
0(de)    
0(go)    
0(ch)    
0(st)    
0(ch)    
0(qu)    
0(bl)    

2021-06-21 11:06:54 WARNING  Testing of policy failed with code: ExitCode.AbstractPolicyNotCompleteOnTestInstances
2021-06-21 11:06:54 INFO     Testing policy in instance: checkmate_tactic - -5
....... # 
QK.k... # 
....... # 
....... # 
....... # 
....... # 
....... # 
1(pl)     
0(de)     
0(go)     
0(ch)     
0(st)     
0(ch)     
0(qu)     
0(bl)     

2021-06-21 11:06:54 WARNING  Testing of policy failed with code: ExitCode.AbstractPolicyNotCompleteOnTestInstances
2021-06-21 11:06:55 INFO     Testing policy in instance: checkmate_tactic - -6
........ # 
QK.k.... # 
........ # 
........ # 
........ # 
........ # 
........ # 
........ # 
1(pl)      
0(de)      
0(go)      
0(ch)      
0(st)      
0(ch)      
0(qu)      
0(bl)      

2021-06-21 11:06:55 WARNING  Testing of policy failed with code: ExitCode.AbstractPolicyNotCompleteOnTestInstances
2021-06-21 11:06:55 INFO     Testing policy in instance: checkmate_tactic - -7
......... # 
QK.k..... # 
......... # 
......... # 
......... # 
......... # 
......... # 
......... # 
......... # 
1(pl)       
0(de)       
0(go)       
0(ch)       
0(st)       
0(ch)       
0(qu)       
0(bl)       

2021-06-21 11:06:55 WARNING  Testing of policy failed with code: ExitCode.AbstractPolicyNotCompleteOnTestInstances
2021-06-21 11:06:55 INFO     Testing policy in instance: checkmate_tactic - -8
.......... # 
QK.k...... # 
.......... # 
.......... # 
.......... # 
.......... # 
.......... # 
.......... # 
.......... # 
.......... # 
1(pl)        
0(de)        
0(go)        
0(ch)        
0(st)        
0(ch)        
0(qu)        
0(bl)        

2021-06-21 11:06:56 WARNING  Testing of policy failed with code: ExitCode.AbstractPolicyNotCompleteOnTestInstances
2021-06-21 11:06:56 INFO     Learnt policy solves the 11.11% of test instances: 1/9
2021-06-21 11:06:56 INFO     Solved instances: [0]
2021-06-21 11:06:56 INFO     Unsolved instances: [-1, -2, -3, -4, -5, -6, -7, -8]
================================================================================
END OF STEP #2: Testing of the D2L policy. 1.81 CPU sec - 46.89 MB
================================================================================
